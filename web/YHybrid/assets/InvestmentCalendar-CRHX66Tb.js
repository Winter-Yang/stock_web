import{h as V}from"./request-DwzYH4Ni.js";import{_ as Y,a as m,o as i,d,w as r,g as c,r as y,l as B,F as v,m as w,n as C,p as S,t as x,b as D}from"./index-CMMZcklP.js";import"./index-D8rVyQy1.js";class F{constructor(e){this.timeline_theme_id=e.timeline_theme_id,this.name=e.name}}class N{constructor(e){var t;this.article_id=e.article_id,this.timeline_id=e.timeline_id,this.date=e.date,this.grade=e.grade,this.source=e.source,this.create_time=e.create_time,this.theme_list=((t=e.theme_list)==null?void 0:t.map(n=>new F(n)))||[]}}class j{constructor(e){this.article_id=e.article_id,this.user_id=e.user_id,this.title=e.title,this.content=e.content,this.like_count=e.like_count,this.comment_count=e.comment_count,this.forward_count=e.forward_count,this.is_like=e.is_like,this.is_step=e.is_step,this.timeline=new N(e.timeline||{}),this.source=this.timeline.source}}class L{constructor(e){var t;this.date=e.date,this.list=((t=e.list)==null?void 0:t.map(n=>new j(n)))||[]}}async function b(o,e){try{console.log(String(o)+"-"+String(e));const t=await V.post("https://app.jiuyangongshe.com/jystock-app/api/v1/timeline/list",{date:String(o)+"-"+String(e)});return console.log(t.data),t.data.map(_=>new L(_))}catch(t){return console.error("获取投资日历数据失败:",t),[]}}const z={name:"InvestmentCalendar",setup(){const o=y([]),e=y(new Date),t=y(!1),n=s=>{const a=new Date(s),l=a.getMonth()+1,p=a.getDate(),g=["周日","周一","周二","周三","周四","周五","周六"][a.getDay()];return`${l}月${p}日 ${g}`},_=s=>"Default",k=async()=>{if(!e.value)return;const s=e.value.getFullYear(),a=(e.value.getMonth()+1).toString().padStart(2,"0");await h(s,a)},h=async(s,a)=>{t.value=!0;try{o.value=await b(s,a)}catch(l){console.error("加载日历数据失败:",l)}finally{t.value=!1}};return B(async()=>{const s=new Date,a=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0");await h(a,l)}),{calendarData:o,selectedDate:e,isLoading:t,formatDate:n,getTimelineItemType:_,handleMonthChange:k}}},A={class:"investment-calendar"},E={class:"calendar-header"},U={class:"month-selector"};function $(o,e,t,n,_,k){const h=c("el-date-picker"),s=c("el-tag"),a=c("el-text"),l=c("el-card"),p=c("el-timeline-item"),g=c("el-timeline");return i(),m("div",A,[d(l,{class:"calendar-card"},{header:r(()=>[D("div",E,[e[1]||(e[1]=D("h3",null,"投资日历",-1)),D("div",U,[d(h,{locale:"zhCn",modelValue:n.selectedDate,"onUpdate:modelValue":e[0]||(e[0]=u=>n.selectedDate=u),type:"month",placeholder:"选择月份",format:"YYYY年MM月",onChange:n.handleMonthChange},null,8,["modelValue","onChange"])])])]),default:r(()=>[d(g,null,{default:r(()=>[(i(!0),m(v,null,w(n.calendarData,(u,M)=>(i(),C(p,{key:M,hollow:!1,timestamp:n.formatDate(u.date),placement:"top",class:"custom-timeline-item"},{default:r(()=>[d(l,null,{default:r(()=>[(i(!0),m(v,null,w(u.list,(f,I)=>(i(),m("div",{key:I,class:"event-item"},[d(a,{type:n.getTimelineItemType(f)},{default:r(()=>[S(x(f.title)+" ",1),(i(!0),m(v,null,w(f.timeline.theme_list,(T,q)=>(i(),C(s,{class:"event-tag",effect:"dark",type:"danger"},{default:r(()=>[S(x(T.name),1)]),_:2},1024))),256))]),_:2},1032,["type"])]))),128))]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})])}const K=Y(z,[["render",$],["__scopeId","data-v-f0634c12"]]);export{K as default};
