import{_ as D,a as k,o as d,d as b,w as p,g as _,r as g,c as m,l as R,F as h,m as j,n as x,b as f,s as y,t as B,p as T}from"./index-DzOw8klO.js";async function O(){try{const u=await(await fetch("http://152.136.147.208:8233/get_bankuai_lists",{method:"POST"})).json(),r={};Object.entries(u.data).forEach(([c,l])=>{r[c]=l.map(n=>({code:n.code,name:n.name,price:n.price,zdf:n.zdf,cje:n.cje,jlr:n.jlr}))}),console.log("获取板块排行数据日期",Object.keys(r));const s=Object.keys(r).sort((c,l)=>new Date(l)-new Date(c)).reduce((c,l)=>(c[l]=r[l],c),{});return console.log("处理后的数据:",s),s}catch(o){return console.error("获取板块排行数据失败:",o),null}}const E={name:"BlockRankPage",setup(){const o=g({}),u=g(!1),r=m(()=>Object.keys(o.value)),s=m(()=>{const e=[];for(let t=0;t<20;t++){const w={};r.value.forEach(i=>{o.value[i]&&o.value[i][t]&&(w[i]={name:o.value[i][t].name,price:o.value[i][t].price})}),e.push(w)}return e}),c=e=>{const a=new Date(e);return`${a.getMonth()+1}-${a.getDate()}`},l=async()=>{u.value=!0;try{const e=await O();e&&(o.value=e)}catch(e){console.error("获取板块排行数据失败:",e)}finally{u.value=!1}};R(()=>{l()});const n=m(()=>{const e=new Set;return r.value.forEach(a=>{o.value[a]&&o.value[a].length>0&&e.add(o.value[a][0].name)}),e});return{dates:r,tableData:s,loading:u,formatDate:c,isTopRankBlock:e=>n.value.has(e)}}},z={class:"block-rank"};function C(o,u,r,s,c,l){const n=_("el-table-column"),v=_("el-table"),e=_("el-card");return d(),k("div",z,[b(e,{class:"rank-card"},{header:p(()=>u[0]||(u[0]=[f("div",{class:"rank-header"},[f("h3",null,"板块排行")],-1)])),default:p(()=>[b(v,{data:s.tableData,style:{width:"100%"},height:"calc(100vh - 180px)","virtual-scrolling":!0,"row-height":54,border:""},{default:p(()=>[(d(!0),k(h,null,j(s.dates,a=>(d(),x(n,{key:a,label:s.formatDate(a),"min-width":"100",align:"center"},{default:p(t=>[t.row[a]?(d(),k(h,{key:0},[f("div",{class:y(["block-name",{"continuous-up":s.isTopRankBlock(t.row[a].name)}])},B(t.row[a].name),3),f("div",{class:y(["block-price",{"up-percent":t.row[a].price>5e3}])},B(t.row[a].price),3)],64)):(d(),k(h,{key:1},[T("-")],64))]),_:2},1032,["label"]))),128))]),_:1},8,["data"])]),_:1})])}const P=D(E,[["render",C],["__scopeId","data-v-2e71eabe"]]);export{P as default};
