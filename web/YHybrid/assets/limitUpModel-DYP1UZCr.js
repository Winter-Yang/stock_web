class c{constructor(t){this.timestamp=t.timestamp,this.status=t.status}}class _{constructor(t){this.plate_id=t.plate_id,this.plate_name=t.plate_name,this.plate_reason=t.plate_reason}}class l{constructor(t){var s;this.stock_reason=t.stock_reason,this.related_plates=((s=t.related_plates)==null?void 0:s.map(o=>new _(o)))||[]}}class r{constructor(t){var s,o;this.buy_lock_volume_ratio=t.buy_lock_volume_ratio,this.change_percent=t.change_percent,this.first_limit_up=t.first_limit_up,this.last_limit_down=t.last_limit_down,this.last_limit_up=t.last_limit_up,this.limit_timeline={items:((o=(s=t.limit_timeline)==null?void 0:s.items)==null?void 0:o.map(n=>new c(n)))||[]},this.limit_up_days=t.limit_up_days,this.m_days_n_boards_boards=t.m_days_n_boards_boards,this.m_days_n_boards_days=t.m_days_n_boards_days,this.non_restricted_capital=t.non_restricted_capital,this.price=t.price,this.stock_chi_name=t.stock_chi_name,this.surge_reason=new l(t.surge_reason||{}),this.symbol=t.symbol,this.total_capital=t.total_capital,this.turnover_ratio=t.turnover_ratio,this.yesterday_limit_up_days=t.yesterday_limit_up_days}}function p(e){if(!(e instanceof Date))throw new Error("输入的值必须是 Date 对象");const t=e.getDay();if(t===6){const s=new Date(e);return s.setDate(e.getDate()-1),s}if(t===0){const s=new Date(e);return s.setDate(e.getDate()-1),s}return e}async function u(){const e=p(new Date);console.log(e);const t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return m(t,s,o)}async function m(e,t,s){try{const o=e+"-"+t+"-"+s;console.log("111111"),console.log(o);const a=await(await fetch("https://flash-api.xuangubao.com.cn/api/pool/detail?pool_name=limit_up")).json();return console.log("获取涨停池数据:",a),a.data.filter(i=>!i.stock_chi_name.toLowerCase().includes("st")&&!i.stock_chi_name.toUpperCase().includes("ST")).map(i=>new r(i))}catch(o){return console.error("获取涨停池数据失败:",o),[]}}async function h(){try{const t=await(await fetch("https://flash-api.xuangubao.com.cn/api/pool/detail?pool_name=yesterday_limit_up")).json();return console.log("获取昨日涨停池数据:",t),t.data.filter(s=>!s.stock_chi_name.toLowerCase().includes("st")&&!s.stock_chi_name.toUpperCase().includes("ST")).map(s=>new r(s))}catch(e){return console.error("获取昨日涨停池数据失败:",e),[]}}export{h as a,u as f};
